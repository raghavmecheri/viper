<html>
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/white.min.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <h1>Viper</h1>
            An amalgamation of our favourite programming quirks
          </section>
          <section>
            Tommy Gomez, Trey Gilliland, Mustafa Eyeceoz, Matthew Ottomano, Raghav Mecheri
          </section>
        </section>
        <section>
          <section>
            <h2>An Overview</h2>
          </section>
          <section>
            <h3>Type System</h3>
            <ul>
              <li>Viper is strongly statically typed, with type checking performed at compile-time</li>
              <li>Support for primitive mainstream data-types</li>
              <li>Library support for data-structures</li>
            </ul>
          </section>
          <section>
            <h3>Ternary Operators & Guard Expressions</h3>
            <ul>
              <li>Viper comes with support for both ternary operators, and a modified form of guard expressions</li>
              <li>Guard expressions are an alternative way of using conditional statements. Think of them as more powerful, more flexible, and better looking switch-case statements(example to follow)</li>
            </ul>
          </section>
          <section>
            <h3>Arrow Functions</h3>
            <ul>
              <li>Viper comes with support for Arrow functions, for one line function definitions</li>
            </ul>
          </section>
          <section>
            <h3>Scope</h3>
            <ul>
              <li>Moving away from the Pythonic indent system, Viper goes back to curly braces to define scope</li>
              <li>An easy way to get rid of tabs vs spaces arguements</li>
            </ul>
          </section>
          <section>
            <h3>In-built functions</h3>
            <ul>
              <li>Support for Math functions like ceil, floor, round, min, max, trunc</li>
              <li>Support for a couple of in-built functions you've just got to have: len() and print()</li>
              <li>Support for typecasting functions like toInt(), toFloat(), toChar()</li>
            </ul>
          </section>
          <section>
            <h3>Iterators</h3>
            <ul>
              <li>Viper also has built-in support for loop iterators</li>
              <li>Support for iterating directly across values via syntactic sugar</li>
            </ul>
          </section>
        </section>
        <section>
          <section>
            <h2>Viper's Structure</h2>
          </section>
          <section>
            <h2>Structure</h2>
            <ul>
              <li>The body of a Viper program consists of statements, and functions</li>
              <li>You can write code outside main!</li>
              <li>Globals are not accessible within functions, preventing Python-esque namespace conflicts</li>
            </ul>
          </section>
          <section>
            <h3>Control Flow/Iteration</h3>
            <ul>
              <li>Support for if statements, as well as guards and ternary operators</li>
              <li>Supports for standard looping as well as iterators</li>
              <li>Support for skip (continue in Java) and abort (break in Java)</li>
            </ul>
          </section>
          <section>
            <h3>Scoping</h3>
            <ul>
              <li>Viper eliminates the global scope from within function bodies, eliminating the ambiguity that comes with global variables</li>
              <li>Support for function overloading</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>Type System</h2>
          </section>
          <section>
            <h3>Supported Types</h3>
            int, float, bool, char, string, nah
          </section>
          <section>
            <table>
              <thead>
                <tr>
                  <th>Datatype</th>
                  <th>Memory</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>int</td>
                  <td>4 bytes</td>
                </tr>
                <tr>
                  <td>float</td>
                  <td>4 bytes</td>
                </tr>
                <tr>
                  <td>bool</td>
                  <td>1 byte</td>
                </tr>
                <tr>
                  <td>char</td>
                  <td>1 bytes</td>
                </tr>
                <tr>
                  <td>string</td>
                  <td>n/a</td>
                </tr>
                <tr>
                  <td>nah</td>
                  <td>n/a</td>
                </tr>
              </tbody>
              </table>
          </section>
          <section>
            <h3>Additional Data Structures</h3>
            lists, dictionaries
          </section>
        </section>

        <section>
          <section>
            <h2>Viper's Standard Library</h2>
          </section>
          <section>
            <ul>
              <li>Viper uses the Viper C standard library as an API to enable in-memory data structures</li>
              <li>Support for lists, dicts, and type-casting</li>
              <li>Build in functions like print</li>
            </ul>
          </section>
          <section>
            <ul>
              <li>Viper's lists are implemented as arraylists, and Viper's dicts are implemented as lookup tables that allow for for nested dictionaries as well</li>
              <li>Support for in-built in type-specific functions like len, contains, append, etc</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>Notable Features</h2>
          </section>
          <section>
            <h3>Guard Expressions</h3>
            <pre><code data-trim data-noescape>
              int y = 0;

              int test = ??
                y < 0 : 0
              | y > 0 : 10
              ?? 5;
            </code></pre>
          </section>
          <section>
            <h3>Iterators</h3>
            <pre><code data-trim data-noescape>
              int[] arr = [1,2,3,4];
              for(int f in arr) {
                print(f)
              }
            </code></pre>
          </section>
          <section>
            <h3>Ternary Operators</h3>
            <pre><code data-trim data-noescape>
              int val = 10;
              int positive = val < 0 ? 0 : val
            </code></pre>
          </section>
          <section>
            <h3>Arrow Functions</h3>
            <pre><code data-trim data-noescape>
              int func add(int x, int y) => x + y;
            </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>Compiler Architecture</h2>
          </section>
          <section>
            <img src="./architecture.png">
          </section>
        </section>

        <section>
          <section>
            <h2>Handling Syntactic Sugar</h2>
          </section>
          <section>
            Viper has a lot of features that we were able to reduce to just syntactic sugar, to make the work easier when we need to generate LLVM
          </section>
          <section>
            <h3>Overview</h3>
            Viper's desugar module runs via two passes, in order to break down more complex expressions before Codegen
          </section>
          <section>
            <h3>Overview: First Pass</h3>
            <ul>
              <li>All of Viper's various for loops are reduced to while loops</li>
              <li>Arrow Functions are reduced to regular function calls</li>
              <li>Guard expressions are reduced to nested ternaries</li>
              <li>Attribute calls are decomposed to regular function calls [a.foo(b) -> foo(a, b)]</li>
            </ul>
          </section>
          <section>
            <h3>Overivew: Second Pass</h3>
            Viper's second pass serves only to convert all types of ternary operators into nested if statements
            <ul>
              <li>Iterate through all the statements in a file</li>
              <li>Detect instances of expresions that contain ternary operators</li>
            </ul>
          </section>
          <section>
            <li>Insert a replacement if statement coupled with an assignment operator at the statement right before the statement that contains the ternary, via a PretendBlock</li>
            <li>Viper uses PretendBlocks to insert blocks for which a reduced scope is not required - the SAST module ignores the change in scope</li>
          </section>
        </section>

        <section>
          <section>
            <h2>Building the SAST</h2>
          </section>
          <section>
            <h3>Highlights</h3>
          </section>
          <section>
            <h3>Challenges Faced</h3>
          </section>
        </section>

        <section>
          <section>
            <h2>Codegen</h2>
          </section>
          <section>
            <h3>Highlights</h3>
          </section>
          <section>
            <h3>Challenges Faced</h3>
          </section>
        </section>

        <section>
          <section>
            <h2>Future Work</h2>
          </section>
          <section>
            <ul>
              <li>Allowing for imports of files/modules</li>
              <li>Support for other C-based libraries (numpy, tensorflow)</li>
              <li>Improve limited casting functionality/support</li>
              <li>Fixing all the bugs that keep cropping up</li>
            </ul>
          </section>
        </section>

        <section>
          <h2>Demo Programs</h2>
        </section>
      
      </div>
    </div>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.js"></script>
    <script>
      Reveal.initialize({
        plugins: [ ]
      });
    </script>
  </body>
</html>